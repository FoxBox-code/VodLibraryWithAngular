
<header>
  <div class="TitleAndMenu">
    <div class="menuAndTitle">
      <button class="menuButton" type="button" (click)="ExpandDashBaord()">
        <img [src]="menuIcon" alt="">
      </button>
      <h1 class="Title" routerLink="/" routerLinkActive="active" ariaCurrentWhenActive="page">
        VOD Library
      </h1>
    </div>

    <nav>
      <form>
        <input id="search" type="text" placeholder="Search"
               [formControl]="searchBar"
               (focus)="searchBarFocused = true"
               (blur)="searchBarFocused = false">
        <div *ngIf="typeof searchBar.value === 'string' && searchBar.value.length > 0 && searchBarFocused">
          <button type="submit" (click)="performASearch()">Find</button>
        </div>
      </form>
    </nav>

    <div class="RegisterLogInButtons"></div>
    <ng-container *ngIf="!userAuth; else LoggedIn">

        <button class="prick" routerLink="register" routerLinkActive="active">Register</button>
        <button class="prick" routerLink="login" routerLinkActive="active">Login</button>

    </ng-container>
    <ng-template #LoggedIn>
      <button *ngIf="userAuth" type="button" (click)="logOutUser()">Log out </button>
      <a *ngIf="userAuth">Hello {{userNameDynamic$ | async}}</a>
    </ng-template>
  </div>

</header>


<main>
  <div class="main-container">


    <aside class="sideBar">


    <section class="sideBarShrinked" *ngIf="!dashBoardExpanded ; else expanded">

    <div class="linkAndIcon"  routerLink="/" >
      <img class="svgIcon" [src]="homeIcon" alt="home">
        <span>Home</span>
    </div>

    <div class="linkAndIcon" [routerLink]="['/subscriptions']" routerLinkActive="true" ariaCurrentWhenActive="page">
      <img class="svgIcon" [src]="subscriptionIcon" alt="">
      <span>Subscriptions</span>
    </div>

    <div class="linkAndIcon" [routerLink]="['/you-page']" routerLinkActive="true" ariaCurrentWhenActive="page">
      <img class="svgIcon" [src]="personIconUrl" alt="YouIcon">
      <span>You</span>
    </div>

    <div class="linkAndIcon" [routerLink]="['/watch-history']" routerLinkActive="true" ariaCurrentWhenActive="page">
      <img class="svgIcon" [src]="historyIconUrl" alt="HistoryIcon">
      <span>History</span>
    </div>





    <ng-template #expandedView>
        <a [routerLink]="['/you-page']" routerLinkActive="true" ariaCurrentWhenActive="page">You</a>
        <a [routerLink]="['/watch-history']">Histroy</a>
        <a [routerLink]="['/liked-videos']">Liked Videos</a>

        <h4>Subscriptions</h4>
        <section class="subscribers">

        </section>




    </ng-template>
    </section>

    <ng-template #expanded>
    <section class="sideBarExpand">
          <div class="linkAndIconExpanded"  routerLink="/" >
            <img class="svgIcon" [src]="homeIcon" alt="home">
              <span>Home</span>
          </div>

          <div class="linkAndIconExpanded" [routerLink]="['/subscriptions']" routerLinkActive="true" ariaCurrentWhenActive="page">
            <img class="svgIcon" [src]="subscriptionIcon" alt="">
            <span>Subscriptions</span>
          </div>

          <hr>

          <div *ngIf="(userAuth$ | async) ; else notLogged">
                <div class="linkAndIconExpanded" [routerLink]="['/you-page']" routerLinkActive="true" ariaCurrentWhenActive="page">
                    <img class="svgIcon" [src]="personIconUrl" alt="YouIcon">
                    <span>You</span>
                </div>

                <div class="linkAndIconExpanded" [routerLink]="['/watch-history']" routerLinkActive="true" ariaCurrentWhenActive="page">
                  <img class="svgIcon" [src]="historyIconUrl" alt="HistoryIcon">
                  <span>History</span>
                </div>

                <div class="linkAndIconExpanded"  routerLinkActive="true" ariaCurrentWhenActive="page">
                  <img class="svgIcon" [src]="playListIcon" alt="HistoryIcon">
                  <span>Playlists</span>
                </div>

                <div class="linkAndIconExpanded" [routerLink]="['/liked-videos']" routerLink="true" ariaCurrentWhenActive="page">
                  <img class="svgIcon" [src]="likeIcon" alt="Like Icon">
                  <span>Liked videos</span>
                </div>

                <h4>Subscriptions</h4>
                <div *ngFor="let subscriber of userFollowing$ | async" >
              <section class="individualSubscriber" [routerLink]="['/user-profile', subscriber.id]">

                  <img class="svgIcon" class="userSubIconseIcon" [src]="subscriber.uesrImageIcon" alt="">
                  <p> {{subscriber.userName}}</p>

              </section>

          </div>



          </div>

            <ng-template #notLogged>
                  <div class="linkAndIconExpanded" [routerLink]="['/you-page']" routerLinkActive="true" ariaCurrentWhenActive="page">
                    <img class="svgIcon" [src]="personIconUrl" alt="YouIcon">
                    <span>You</span>
                  </div>

                  <div class="linkAndIconExpanded" [routerLink]="['/watch-history']" routerLinkActive="true" ariaCurrentWhenActive="page">
                    <img class="svgIcon" [src]="historyIconUrl" alt="HistoryIcon">
                    <span>History</span>
                  </div>

                  <hr>

                  <h5>Sign in to like videos, comment, and subscribe.</h5>
                  <div class="buttonWrapper">
                      <button  type="button" [routerLink]="['/register']">Sign In</button>
                      <button id="button" type="button" [routerLink]="['/login']">Log In</button>
                  </div>
            </ng-template>



          <hr>

          <h4>Explore</h4>
        <section class="genreList" *ngFor="let category of categories | async ; let i = index" >
          <div class="genreAndIcon">
            <img class="svgIcon" [src]="genreIconsArray[i]" alt="Icon">
            <p class="ganreSelector" [routerLink]="['genre-video', category.name]">{{category.name}}</p>

          </div>
        </section>
      </section>
    </ng-template>
          </aside>







  <section class="mainContent">
      <ng-container *ngIf="mainMenu; else DifferentComponent">
            <app-videos-section>

            </app-videos-section>
      </ng-container>

      <ng-template #DifferentComponent>
            <router-outlet>

            </router-outlet>
      </ng-template>
  </section>
  </div>

</main>


